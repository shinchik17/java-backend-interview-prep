#### 60. –ò—Ç–µ—Ä–∞—Ç–æ—Ä –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–æ–≥–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–≥–æ –æ–±—Ö–æ–¥–∞ –¥–≤—É—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

–ï—Å—Ç—å Java –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏—Ç–µ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±–µ–≥–∞–µ—Ç –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏. –£ –Ω–µ–≥–æ 2 –º–µ—Ç–æ–¥–∞. hasNext() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ—Å—Ç—å –ª–∏ —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è. next() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –∏ —Å–¥–≤–∏–≥–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä. –£ –Ω–∞—Å –µ—Å—Ç—å 2 –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é, –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∑–Ω–∞–µ–º. –ó–∞–¥–∞—á–∞: –Ω–∞–ø–∏—Å–∞—Ç—å –æ–¥–∏–Ω –∏—Ç–µ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑—å–º–µ—Ç –¥–≤–∞ –∏–º–µ—é—â–∏—Ö—Å—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –∏ –ø—Ä–æ–π–¥–µ—Ç—Å—è –ø–æ –∏—Ö –æ–±—â–µ–º—É –Ω–∞–±–æ—Ä—É –≤ —Ç–æ–º –∂–µ –∏—Ö –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã hasNext() –∏ next(). –ü—Ä–∏–º–µ—Ä –ø—Ä–∏–≤–µ–¥–µ–Ω –ø–µ—Ä–µ–¥ –∫–æ–¥–æ–º. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è. –¢–æ–ª—å–∫–æ –Ω–µ –º–µ–Ω—è–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –•–æ—Ç–∏–º –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ –ø–∞–º—è—Ç–∏, —Ç–æ –µ—Å—Ç—å –Ω–µ–ª—å–∑—è —Å–Ω–∞—á–∞–ª–∞ —Å—á–∏—Ç–∞—Ç—å –æ–±–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –≤ –ø–∞–º—è—Ç—å

```java
/*
        –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ –¥–≤–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ a –∏ b, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã—Ö –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é
        –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º.
        –ù–∞–ø–∏—Å–∞—Ç—å –∏—Ç–µ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–π–¥–µ—Ç –ø–æ –æ–±—â–µ–º—É –Ω–∞–±–æ—Ä—É –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ a –∏ b
        –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—è.
        –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ null.

        –ü—Ä–∏–º–µ—Ä:
        a –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ {1, 3}
        b –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ {2, 3, 5, 6}
        comparator -- –æ–±—ã—á–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª
        –¢–æ–≥–¥–∞ CollatingIterator –¥–µ–ª–∞–µ—Ç –æ–±—Ö–æ–¥ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:
        1 -> 2 -> 3 -> 3 -> 5 -> 6
*/

public class CollatingIterator<E> implements Iterator<E> {

    private final Iterator<E> a;
    private final Iterator<E> b;
    private final Comparator<E> comparator;

    public CollatingIterator(Iterator<E> a, Iterator<E> b, Comparator<E> comparator) {
        this.a = a;
        this.b = b;
        this.comparator = comparator;
    }

    @Override
    public boolean hasNext() {
        return false;
    }

    @Override
    public E next() {
        return null;
    }
}
```


{{< hint warning >}}  
**–°–ø–æ–π–ª–µ—Ä—ã –∫ —Ä–µ—à–µ–Ω–∏—é**  
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}  
üí° –•—Ä–∞–Ω–∏–º **–ø–æ –æ–¥–Ω–æ–º—É** ¬´–≤–∑–≥–ª—è–¥—É –≤–ø–µ—Ä—ë–¥¬ª (`nextA`, `nextB`) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞.  
üí° –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ `next()` —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º —ç—Ç–∏ ¬´–∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ¬ª —ç–ª–µ–º–µ–Ω—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –º–µ–Ω—å—à–∏–π, –∑–∞—Ç–µ–º **–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ** –ø—Ä–æ–¥–≤–∏–≥–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä.  
üí° –ú–µ—Ç–æ–¥ `hasNext()` –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —á—Ç–æ –≤–µ—Ä–Ω—É—Ç—å –∏–∑ –ª—é–±–æ–≥–æ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.  
üí° –ü–∞–º—è—Ç—å ‚Äî **–∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–∞—è**: —Ö—Ä–∞–Ω–∏–º –º–∞–∫—Å–∏–º—É–º –¥–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–∞.  
{{< /details >}}

{{< details "–†–µ—à–µ–Ω–∏–µ" close >}}

```java
import java.util.Comparator;
import java.util.Iterator;
import java.util.NoSuchElementException;

public class CollatingIterator<E> implements Iterator<E> {

    private final Iterator<E> a;
    private final Iterator<E> b;
    private final Comparator<E> comparator;

    // –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ –∫–∞–∂–¥–æ–≥–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞
    private E nextA;
    private E nextB;
    private boolean hasNextA;
    private boolean hasNextB;

    public CollatingIterator(Iterator<E> a, Iterator<E> b, Comparator<E> comparator) {
        this.a = a;
        this.b = b;
        this.comparator = comparator;
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∫–∞–∂–¥–æ–≥–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞
        advanceA();
        advanceB();
    }

    @Override
    public boolean hasNext() {
        return hasNextA || hasNextB;
    }

    @Override
    public E next() {
        if (!hasNext()) {
            throw new NoSuchElementException();
        }
        E result;
        if (hasNextA && hasNextB) {
            // –û–±–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏–º–µ—é—Ç —ç–ª–µ–º–µ–Ω—Ç ‚Äî –≤—ã–±–∏—Ä–∞–µ–º –º–µ–Ω—å—à–∏–π –ø–æ –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä—É
            if (comparator.compare(nextA, nextB) <= 0) {
                result = nextA;
                advanceA();
            } else {
                result = nextB;
                advanceB();
            }
        } else if (hasNextA) {
            result = nextA;
            advanceA();
        } else { // only B remains
            result = nextB;
            advanceB();
        }
        return result;
    }

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–¥–≥—Ä—É–∑–∫–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–∑ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ a
    private void advanceA() {
        if (a.hasNext()) {
            nextA = a.next();
            hasNextA = true;
        } else {
            nextA = null;
            hasNextA = false;
        }
    }

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–¥–≥—Ä—É–∑–∫–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–∑ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ b
    private void advanceB() {
        if (b.hasNext()) {
            nextB = b.next();
            hasNextB = true;
        } else {
            nextB = null;
            hasNextB = false;
        }
    }
}
````


{{< /details >}}