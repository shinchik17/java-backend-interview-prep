#### 2. –£–ø—Ä–æ—Å—Ç–∏—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏—è

**–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏:**  
üìå –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –¥–∞–Ω–Ω—ã–π –∫–æ–¥, –∏ —É–ª—É—á—à–∏—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∑–∞ —Å—á—ë—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞.

```java
public class AvoidComplexLambdas {
    private final Set<User> users = new HashSet<>();

    public Set<User> findEditors() {
        return users.stream()
                .filter(u -> u.getRoles().stream()
                        .anyMatch(r -> r.getPermissions().contains(Permission.EDIT)))
                .collect(toSet());
    }
}
```

---

{{< hint warning >}}  
**–°–ø–æ–π–ª–µ—Ä—ã –∫ –æ—Ç–≤–µ—Ç—É**  
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}  
üí° –ú–µ—Ç–æ–¥ `findEditors()` –∏—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Ä–æ–ª—å —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º `EDIT`.  
üí° –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ª—è–º–±–¥—ã —É—Ö—É–¥—à–∞—é—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å.  
üí° –•–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π –±—É–¥–µ—Ç **–≤—ã–Ω–µ—Å—Ç–∏ –≤–ª–æ–∂–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É** –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ —Å –ø–æ–Ω—è—Ç–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º.  
{{< /details >}}

{{< details "–†–µ—à–µ–Ω–∏–µ" close >}}

### üîç –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥?

–ú–µ—Ç–æ–¥ `findEditors()`:

- –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º `users`,
    
- –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–µ—Ö, —É –∫–æ–≥–æ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ `Role` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ `Permission.EDIT`,
    
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–∞–∫ `Set`.
    

### ‚úÖ –ö–∞–∫ —É–ª—É—á—à–∏—Ç—å?

–í—ã–Ω–æ—Å–∏–º –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ª—è–º–±–¥—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `hasEditPermission(User u)`:

```java
public class AvoidComplexLambdas {
    private final Set<User> users = new HashSet<>();

    public Set<User> findEditors() {
        return users.stream()
                .filter(this::hasEditPermission)
                .collect(Collectors.toSet());
    }

    private boolean hasEditPermission(User user) {
        return user.getRoles().stream()
                .anyMatch(role -> role.getPermissions().contains(Permission.EDIT));
    }
}
```

### ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –ø–æ–≤—ã—à–∞–µ—Ç—Å—è.
    
- –ü–æ—è–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `hasEditPermission`.
    
- –£–ø—Ä–æ—â–∞–µ—Ç—Å—è –æ—Ç–ª–∞–¥–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.
    

üî• –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ ‚Äî —ç—Ç–æ –ø—Ä–æ —á–∏—Å—Ç—ã–π –∫–æ–¥, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ –∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–¥! üßπ  
{{< /details >}}