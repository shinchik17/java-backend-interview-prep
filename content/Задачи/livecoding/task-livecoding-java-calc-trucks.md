#### 47. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≥—Ä—É–∑–æ–≤–∏–∫–∏

**–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏:**  
üî• –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `calcTrucks`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ –≤–µ—Å–æ–≤ –≥—Ä—É–∑–æ–≤, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–∑–æ–≤–∏–∫–æ–≤ –∏ –∏—Ö –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥—Ä—É–∑—ã –ø–æ –≥—Ä—É–∑–æ–≤–∏–∫–∞–º —Ç–∞–∫, —á—Ç–æ–±—ã **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ** –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏—Ö, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **—Å—É–º–º–∞—Ä–Ω—É—é –Ω–µ–¥–æ–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å** (–æ–±—â–∞—è —Å–≤–æ–±–æ–¥–Ω–∞—è –µ–º–∫–æ—Å—Ç—å).

```java
/**
 * @param weights           –º–∞—Å—Å–∏–≤ –≤–µ—Å–æ–≤ –≥—Ä—É–∑–æ–≤
 * @param trucksCount       –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–∑–æ–≤–∏–∫–æ–≤
 * @param truckMaxCapacity  –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –≥—Ä—É–∑–æ–≤–∏–∫–∞
 * @return —Å—É–º–º–∞—Ä–Ω–∞—è –Ω–µ–¥–æ–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å (truckCount*truckMaxCapacity - —Å—É–º–º–∞—Ä–Ω—ã–π –≤–µ—Å —Ä–∞–∑–º–µ—â—ë–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤)
 */
private int calcTrucks(int[] weights, int trucksCount, int truckMaxCapacity) {
    // TODO
}
```

{{< hint warning >}}  
**–°–ø–æ–π–ª–µ—Ä—ã –∫ —Ä–µ—à–µ–Ω–∏—é**  
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}  
üí° –≠—Ç—É –∑–∞–¥–∞—á—É –º–æ–∂–Ω–æ —Å–≤–µ—Å—Ç–∏ –∫ –º–Ω–æ–≥–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–º—É —É–ø–∞–∫–æ–≤–æ—á–Ω–æ–º—É (bin packing) —Å —Ü–µ–ª—å—é –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø—É—Å—Ç–æ–≥–æ –º–µ—Å—Ç–∞.  
üí° –û–¥–∏–Ω –∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ ‚Äî **Best Fit Decreasing**:

- –°–Ω–∞—á–∞–ª–∞ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–∑—ã –ø–æ —É–±—ã–≤–∞–Ω–∏—é –≤–µ—Å–∞.

- –ó–∞—Ç–µ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥—Ä—É–∑–∞ –Ω–∞–π—Ç–∏ —Ç–æ—Ç –≥—Ä—É–∑–æ–≤–∏–∫ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä), –≥–¥–µ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ, –Ω–æ –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ, —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ.  
  üí° –ï—Å–ª–∏ –≥—Ä—É–∑ –Ω–∏–∫–∞–∫ –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –Ω–∏ –≤ –æ–¥–∏–Ω –∏–º–µ—é—â–∏–π—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –µ–≥–æ –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å (–∏–ª–∏ —Å—á–∏—Ç–∞—Ç—å –Ω–µ–¥–æ–≥—Ä—É–∂–µ–Ω–Ω—ã–º —Ü–µ–ª–∏–∫–æ–º).  
  {{< /details >}}


{{< details "–†–µ—à–µ–Ω–∏–µ" close >}}

```java
import java.util.Arrays;

public class TruckLoader {

    public static int calcTrucks(int[] weights, int trucksCount, int truckMaxCapacity) {
        // 1. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≥—Ä—É–∑–æ–≤ –ø–æ —É–±—ã–≤–∞–Ω–∏—é –¥–ª—è Best Fit Decreasing
        Arrays.sort(weights);
        // –ø–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –º–∞—Å—Å–∏–≤
        for (int i = 0, j = weights.length - 1; i < j; i++, j--) {
            int tmp = weights[i];
            weights[i] = weights[j];
            weights[j] = tmp;
        }

        // 2. –ú–∞—Å—Å–∏–≤ —Ç–µ–∫—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞–∂–¥–æ–≥–æ –≥—Ä—É–∑–æ–≤–∏–∫–∞
        int[] load = new int[trucksCount];
        // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω—É–ª—è–º–∏

        // 3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≥—Ä—É–∑–∞ –∏—â–µ–º "best fit"
        for (int w : weights) {
            int bestIndex = -1;
            int minRemaining = Integer.MAX_VALUE;
            for (int i = 0; i < trucksCount; i++) {
                int remaining = truckMaxCapacity - (load[i] + w);
                if (remaining >= 0 && remaining < minRemaining) {
                    minRemaining = remaining;
                    bestIndex = i;
                }
            }
            if (bestIndex >= 0) {
                load[bestIndex] += w;
            }
            // –∏–Ω–∞—á–µ –≥—Ä—É–∑ –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –Ω–∏–∫—É–¥–∞ ‚Äî –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
        }

        // 4. –°—á–∏—Ç–∞–µ–º —Å—É–º–º–∞—Ä–Ω—É—é –Ω–µ–¥–æ–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å
        int totalFree = 0;
        for (int i = 0; i < trucksCount; i++) {
            totalFree += (truckMaxCapacity - load[i]);
        }
        return totalFree;
    }

    public static void main(String[] args) {
        System.out.println(calcTrucks(new int[]{10, 100, 20, 30, 40, 10}, 4, 100)); // 90
        System.out.println(calcTrucks(new int[]{10, 100, 20, 30, 40}, 4, 100));    // 0
    }
}
```

üìå **–ß—Ç–æ –≤–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å:**  
‚úÖ Best Fit Decreasing ‚Äî –ø—Ä–æ—Å—Ç–∞—è –∏ –±—ã—Å—Ç—Ä–∞—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞, –¥–∞—é—â–∞—è —Ö–æ—Ä–æ—à–µ–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∫ –æ–ø—Ç–∏–º—É–º—É –¥–ª—è bin-packing.  
‚úÖ –°–Ω–∞—á–∞–ª–∞ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –≥—Ä—É–∑—ã –ø–æ —É–±—ã–≤–∞–Ω–∏—é, –∑–∞—Ç–µ–º —Ä–∞–∑–º–µ—â–∞–µ–º –∫–∞–∂–¥—ã–π –≤ —Å–∞–º—ã–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –æ—Å—Ç–∞—Ç–æ–∫.  
‚úÖ –í—ã—á–∏—Å–ª—è–µ–º —Å—É–º–º–∞—Ä–Ω–æ–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –ø–æ –≤—Å–µ–º –≥—Ä—É–∑–æ–≤–∏–∫–∞–º –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ –∫–∞–∫ –º–µ—Ä—É –Ω–µ–¥–æ–≥—Ä—É–∑–∫–∏.  
{{< /details >}}