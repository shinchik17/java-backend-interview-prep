#### 12. –ó–∞–¥–∞—á–∞. SQL. –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏, —á—Ç–æ–±—ã –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞—à–∏–Ω, –∞ –∫–∞–∂–¥–∞—è –º–∞—à–∏–Ω–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞–ª–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é?


```sql
CREATE TABLE USER (
    id INT,
    name VARCHAR(50)
);

INSERT INTO USER (id, name) VALUES
(1, 'Ivan'),
(2, 'Oleg'),
(3, 'Anna'),
(4, 'Ivan'),
(5, 'Ted');

CREATE TABLE CAR (
    id INT,
    model VARCHAR(50)
);

INSERT INTO CAR (id, model) VALUES
(4422, 'Opel 1'),
(4523, 'BMV 5'),
(4612, 'VW'),
(4853, 'BMV 6');

```




{{< hint warning >}}
**–°–ø–æ–π–ª–µ—Ä—ã –∫ —Ä–µ—à–µ–Ω–∏—é** ¬†
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}
- –ù–∞–º –Ω—É–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`USER`) –∏ –º–∞—à–∏–Ω—ã (`CAR`) —Ç–∞–∫, —á—Ç–æ–±—ã **–æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞—à–∏–Ω**, –Ω–æ –∫–∞–∂–¥–∞—è –º–∞—à–∏–Ω–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞–ª–∞ —Ç–æ–ª—å–∫–æ **–æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**.
- –î–ª—è —ç—Ç–æ–≥–æ –≤ —Ç–∞–±–ª–∏—Ü–µ **CAR** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á (`FOREIGN KEY`), –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ `id` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å **—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** ‚Äî –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –º–∞—à–∏–Ω—É –±–µ–∑ –≤–ª–∞–¥–µ–ª—å—Ü–∞.
{{< /details >}}

{{< details "–†–µ—à–µ–Ω–∏–µ" close >}}

```sql
CREATE TABLE USER (
    id INT PRIMARY KEY,
    name VARCHAR(50) NOT NULL
);

CREATE TABLE CAR (
    id INT PRIMARY KEY,
    model VARCHAR(50) NOT NULL,
    user_id INT,  -- –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–µ –¥–ª—è —Å–≤—è–∑–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
    FOREIGN KEY (user_id) REFERENCES USER(id) ON DELETE CASCADE
);

-- –ù–∞–ø–æ–ª–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—ã –¥–∞–Ω–Ω—ã–º–∏
INSERT INTO USER (id, name) VALUES
(1, 'Ivan'),
(2, 'Oleg'),
(3, 'Anna'),
(4, 'Ivan'),
(5, 'Ted');

INSERT INTO CAR (id, model, user_id) VALUES
(4422, 'Opel 1', 1),
(4523, 'BMW 5', 2),
(4612, 'VW', 3),
(4853, 'BMW 6', 1);
```

üîπ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

- –ü–æ–ª–µ `user_id` –≤ `CAR` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ `id` –≤ `USER`, —Å–≤—è–∑—ã–≤–∞—è –º–∞—à–∏–Ω—É —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º.
- `ON DELETE CASCADE` ‚Äî –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–¥–∞–ª—è—Ç, –≤—Å–µ –µ–≥–æ –º–∞—à–∏–Ω—ã —Ç–æ–∂–µ —É–¥–∞–ª—è—Ç—Å—è.

üîπ **–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**  
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–∞—à–∏–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```sql
SELECT c.model 
FROM CAR c
JOIN USER u ON c.user_id = u.id
WHERE u.name = 'Ivan';
```

**–í—ã—Ö–æ–¥:**

```
Opel 1
BMW 6
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "Ivan" –≤–ª–∞–¥–µ–µ—Ç Opel 1 –∏ BMW 6**.
{{< /details >}}