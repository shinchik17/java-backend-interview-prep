+++
title = 'Вопросы на подумать'
weight = 3
bookFlatSection = true
bookToC = false
bookHidden = true
+++

# Вопросы на подумать

---

##	Основы Java, коллекции, OOP, лямбды, иммутабельность

---

### 1. HashMap расширилась. Добавили в неё 13 элементов, потом удалили 2 что произойдет?
### 2. В HashMap вставляем 10 тыс ключ-значений, это все разные объекты. Как сделать так, что с вероятностью 99% мы получили значение по ключу за константное время? - один вариант: сразу создать очень большую мапу 10 млрд значений
### 3. Какие коллекции позволяют дублировать, какие не позволяют?
### 4. Переменная не помечена словом final, но изменяться она не может?
### 5. Хорошо ли делать длинную цепочку наследования на классах? 
### 6. Есть класс, у которого 2 поля int и java.util.date. Как сделать immutable class из этого?
### 7. Есть key, value. Программист создает Map с дженериками, где key - собственный класс, а value - string. Что ему нужно сделать, чтобы использовать key?
### 8. Есть список из 10 объектов. Делаю стрим map, filter, и другие нетерминальные операции. Сохраняю ссылку на стрим. Потом добавлю новые объекты в список. В самом конце, беру ссылку на стрим, вызываю терминальную операцию toList(). Какое количество объектов стрим обработает: изначальное или новое? Или ошибка?
### 9. Я использую массив в качестве ключа для HashMap. Во время код-ревью что вы мне скажете?
### 10. В таблице первичный ключ Х, но нужно искать не по Х, а по У. Когда грузишь мапу, что ты можешь сделать, чтобы ключь стал другим в мапе, но ты не потеряешь данные? Зачем я могу это делать?
### 11. Компилятор требует при использовании лямбды выражения либо final, либо effectively final?
### 12. Ты передаешь переменные. Параметры через конструктор. Они объявлены как final. Это иммутабельность? 
### 13. У класса переопределили метод. Как вызвать метод предка из переопределенного класса? Представим, что метод приватный.
### 14. Создал иммутабельный класс, в нем 10 полей, хочу использовать свой класс как ключ в HashMap. Что делать?
### 15. Объект типа User с двумя полями String firstName, String lastName, без реализации hashCode(). Объекты User используются в качестве ключей в HashMap. Сначала записали в HashMap с ключом user1. Потом создали user2 с такими же firstName, lastName, пробуем по ключу user2 вытащить из HashMap данные. Что будет?
### 16. Сможет ли сборщик мусора удалить два объекта ссылающиеся друг на друга?
### 17. Если в интервейсе есть один дефолтный метод, то его можно использовать как функциональный интерфейс?
### 18. Если мы переопределяем поведение родительского метода, можем ли мы изменить тип исключения, которое выбрасывает родительское?
### 19. Предположим у тебя есть объект, который представляет из себя List листов стрингов. С помощью Stream API тебе надо найти String  с наибольшей длиной
### 20. Статический блок, переменная статическая не final, она проинициализированна в блоке инициализации и в самом поле. Какое значение переменная примет?
### 21. Берем не final переменную. Инициализируем переменную через поле и через конструктор. Какое значение переменная примет?
### 22. Есть три способа пройтись по коллекции. Расскажи про них и какой в каком случае использовать?
### 23. Что будет если на вход map() и flatMap() приходит null
### 24. Как скопировать объект? Сделать копию объекта
### 25. Есть ArrayList на 10 элементов. Хочу получить доступ к пятому элементу. Почему доступ будет O(1)? Как сработает доступ по индексу? Если в ArrayList лежат strings?
### 26. Хочу создать LinkedList из strings. Где будут лежать strings?
### 27. У нас есть некий объект Юзер. Есть три параметра. Как инкапсулировать параметры?
### 28. Есть класс Parent и от него наследуется класс Child. В Parent есть три метода. Как нам реализовать методы, чтобы ими могли пользоваться только наследуемые. 
### 29. Есть класс внутри которого находится статический параметр. Если я создам 50 инстрансов этого класса и буду менять этот статический параметр, то что будет?
### 30. Создал Stream. Произвел операцию. Смогу ли я обратиться к этому стриму еще раз?
### 31. Нужно отсортироваться List с какими то классами. Стринговыми юзерами. а стринговые юзеры они храняться в пакете который мы получили из мавена. Что тут лучше использовать?
### 32. Если мы напишем stream.filter.filter.filter что произойдет?
### 33. Как на практике проверить, что вместо родителя можно подставить наследника?
### 34. С чего начинается поиск ресурсов для удаления GC. Как GC ищет первые ссылки для удаления?
### 35. Пердставим, что у нас есть приложение, которое нормально обрабатывает 100 RPS. Жрет 250 мб оперативки. Мы захотели его ускорить и выдали ему 32 гб оперативки. Дадим на него теже 100 RPS. Измениться ли профиль ответа? Ускориться ли работа? Как будет наполняться Heap?
### 36. Как можно сравнить объекты между собой кроме equals и hashcode
### 37. Есть два класса. Один класс используется как ключ для мапы, другой класс исспользуется только для значений в мапе. Как ты будешь реализовывать контракт hashCode и equals в этих классах
### 38. TreeSet. Есть элементы от 0 до n. Начинаю последовательно вставлять в TreeSet. Какая будет высота дерева? 
### 39. Есть список состоящий из одного миллиона объектов. Нужно отыскать все дубликаты использую минимальный объем памяти
### 40. Есть класс User. Внутри есть поле класса Address. В классе Address есть поле класса Building. Хочу по user получить номер здания, в котором живет. В этой цепочке всё может быть Null. Мы не хотим NullPointerException. Как это сделать? Какой уникальный безопасный метод нужно создать?
### 41. Если в кетч поймали исключение, начали обрабатываеть и словили еще одно исключение. Что будет?
### 42. Что можно сделать с List, но нельзя сделать с Queue
### 43. Как сделать копию объекта не используя стандартные методы?
### 44. Предоположим у нас есть лист Юзеров. У Юзера есть логин. Как преобразовать лист в мапу, где ключ будет логин, а значение будет Юзер. 
### 45. Есть бинарное дерево упорядоченное слево на право. Есть ссылка на корень дерева. Нужно вывести все элементы дерева в порядке возрастания.
	
## Многопоточность

---
### 1. Переменную count хочешь быстро заинкрементировать до 10 тыс. В цикле запустил 10 тыс. потоков, которые инкрементят счетчик. Решил сделать синхронизацию. Какой способ выбрать: synchronized или atomic? Почему?
### 2. Как сделать так, если 10 потоков вызывают get() одновременно, ты не создал 10 объектов Singletone?
### 3. Может ли быть, что разные потоки всегда видят актуальное значение переменной, хотя она НЕ помечена volatile?
### 4. Есть статичный метод, в его сигнатуре пишу synchronized. На чем будет происходить синхронизация?
### 5. Есть объект, внутри синхронизированный метод, к которому могут обратиться несколько потоков. Предположите, когда синхронизированный метод не сработает и получим коллизию?
### 6. Пишем генерацию отчета. Мне надо сходить в 4 системы по HTTP и получить данные. Хотим ускорить с помощью многопоточки. Как сделать?
### 7. Есть 5 разных потоков. Есть метод объекта, который потоки хотят плюс-минус одновременно дернуть, но нужно, чтобы дернул только один. Что делать в первую очередь
### 8. На atomic переменной сделали счетчик. Изначально значение переменной 0. Два потока прибавляют 1 одновременно.
### 9. Есть несколько потоков, мы хотим, чтобы они все стартанули одновременно. Как это сделать средствами Java?
### 10. В коде нужно сделать паузу. Нельзя использовать классические способы Thread sleep, wait. Как нам реализовать паузу?
### 11. Нужно сделать систему мониторов, мьютексов, чтобы таски выполнять согласованно. Какой concurrency интерфейс использовать? Методы, классы, интерфейсы, которые предоставляют механизмы блокировок?
### 12. Есть счетчик. Запустили 100 потоков. По итогу у нас будет значение 100?
### 13. В одном потоке перебирается коллекция, а в другом потоке из коллекции что-то удаляется. Что делать, чтобы не было ошибки?
### 14. У хэшмап планируем использовать в качестве некого счетчика для действий пользователя. В качестве ключа у нас пользователь, в качестве значения счетчик. Происходит какое-то событие, мы берем пользователя, добавляем в счетчик плюс один. Таким образом у нас растет событие. Вопрос. Будет ли корректно такая мапа работать в многопоточке?
### 15. Если создать 100 потоков программа будет выполняться быстрее? Поток идет в центробанк запрашивает валюту и заносит в таблицу. Миллион значений. Если создать 5 потоков и 100 потоков. Что быстрее выполнится?
### 16. Создание потока дорогая операция. Как нам помогает ExecutorService?
### 17. У многопоточки есть 3 параметра. atomicity, visibility, happens-before. Что из этого нам обеспечивает переменная volatile
### 18. Предположим поток ничего не выделяет из памяти. Вообще не обращается к Хипу. Этот поток может жить без Стека?
### 19. Поток который обрабатывает очень большой объекм данных. Поток обращается к данным. Все данные будут закешированы к кеше этого потока?
### 20. Когда присваиваете значение в переменную это атомарное действие?
### 21. Если два потока хотят синхронизироваться, какой объект они могут использовать в качестве монитора?
### 22. Если 10 потоков, которые пришли в synchronize, кто из них первый  попадет в Lock
### 23. Есть потоки. Вы стартуете на каждую задачу либо сделали threadPool или Executor. У вас ограниченное количество потоков. С точки зрения вычислений это более эффективно или просто удобно?
### 24. Как написать асинхронное приложение. Как одновременно запустить две функции и дождаться их выполнения. Например есть getTotalPrice и getBonusRubbles. Надо вычесть их в конце. Как это сделать?
### 25. В чем отличие несинхронной обработки запроса и неблокирующей реактивной обработки?
### 26. Почему в многопоточной среде выполнения из коллекции ArrayList может выброситься ConcurrentModificationException. Как это пофиксить?
### 27. Если создали в main новый поток и запустили, какой приоритет будет у потока?
### 28. Пишу код, хочу использовать чужой класс. Мой участок кода будет исполняться многопоточно. Как понять, что чужой класс будет нормально работать в многопоточной среде? Чужой класс - это Registry, там обычная HashMap, в которую что-то складываем, потом что-то достаем
### 29. Хотим вызвать три метода в параллель, объединить результаты которые они выдадут и вызвать из своего метода? Каждый из методов возвращает Set.
	
# SQL, базы данных, индексы, ORM и миграции

---
### 1. На счету пользователя 1000 р. Первая транзакция: читает 1000 на счету, пытается снять 1000. Вторая транзакция тоже читает 1000, хочет снять еще 500 р. По результату уходим в минус. Как обойти ситуацию? -Если хотим решить ситуацию, но оставить уровень транзакции READ COMMITED?
### 2. На уровне Repeatable Read или Serializable транзакция начинает обновлять запись, но сама транзакция еще не завершается. Могут ли две транзакции друг друга заблокировать? Как называется, как с ней быть? - deadlock
### 3. По бизнес-логике нужно часто делать запросы по точному совпадению фамилии доставать пользователей. Ты хочешь повесить индекс на это поле для повышения перформанса. Какой тип индекса лучше подойдет? - А хеш-индекс подойдет? - Если поле не фамилия, а номер счета, но не primary key? - Если поле updated_at timestamp, хочу посмотреть все данные, которые были обновлены за последний час, либо за вчерашний день,  какой индекс лучше подойдет? - BTree, потому что отсортированное дерево
### 4. Как резделять данные по шардам, если есть 4 инстанса, мы берем данные из uuid. А потом захотим добавить 5 инстанс, придется переложить заново? - Альтернатива координатору для распределения по шардам (если координатор упадет, потеряем данные ко всему)
### 5. Liquibase. Как действовать если не знаем, какая БД в проде. Боимся, что что-то произойдет при накатке. Хотим сделать себе возможность откатить изменения 
### 6. Есть таблица, 2 поля: айди и количество лайков. Как бы ты сделал увеличение счетчиков лайков на 1?
### 7. Какой-то запрос читает данные, в это время другой изменяет данные в бд. Какие данные к нам прийдут?
### 8. Создали индекс на поле, делаем запрос на это поле, а индексы не сработали. Такое возможно?
### 9. Запрос медленно работает Что делать?
### 10.	Есть атрибут state, на нем есть индекс. Подхватится ли индекс при запросе с проверкой state на Null?
### 11.	Из таблицы удаляем автора. К автору прицеплено 10 книг. К кому будут прицеплены эти книги? Что будет с id автора?
### 12.	Почему нельзя сделать две БД на запись и на чтение?
### 13.	Как из запроса с группировкой выбрать одну группу? Например, чтобы сумма была больше чего-то?
### 14.	Большая таблица на миллион записей. Обеспечить быстрый доступ к данным. В таблицу много пишем. Как совместить?
### 15.	Как удалять быстро и много данных из БД? Удаление по дням. Как можно реализовать?
### 16.	Как ограничить размер выборки? Запрос должен вытащить n записей. Как реализовать?
### 17.	Есть таблица с данными. 10 полей. Есть выбор сделать 10 индексов по одному полю или один индекс по десяти. Как лучше?
### 18.	Представь, что у нас много компаний сидят на одной БД и у нас в каждой таблице есть колонка с кодом компании. Любой WHERE начинается с наименования компании. Означает ли это что нужно повесить индекс на колонку с компаниями?
### 19.	Есть два апдейта. Есть пользователь и баланс на счете. Первый апдейт снимает с него 50 рублей. Второй апдейт снимает 50 рублей. Они выполняются одновременно или последовательно? Есть ли какие то механизмы управления?
### 20.	У нас есть очень длинная транзакция с большим количеством селектов. В конце один апдейт. Что сделать чтобы заблокировать данные на этапе когда я их селекчу.
### 21.	Что будет если мы делаем селект в одну таблицу, но у таблицы есть много ссылок на другие таблицы. Один ко многим. Что делать, чтобы объединить таблицы и был только одни запрос
### 22.	Представь, что ты проектируешь таблицу. Как ты в самом начале накидываешь индексы?
### 23.	Уровень изоляции Repeatable read. Две транзакции работают. Будет Lock на чтение, на запись или на то и на другое?
### 24.	Твой запрос перестал работать через некоторое время. Твои действия?
### 25.	Есть таблица с данными. Кредитные заявки. Есть некий кредитный статус. 3 штуки. New, in progres, close. Нам нужно написать миграцию, которая будет доставать заявку по статусу и их мигрировать. Миграция подразумевает изменение статусов. Какие проблемы могут появиться и как их решать? Рассматриваем один поток. Данных очень много и нельзя все вытаскивать скопом.
### 26.	Таблица пользователей и таблица машин. Связь один-ко-многим. Где здесь N+1 запрос?
### 27.	Две простые сущности: сотрудник и телефон. О сотруднике данных мало: ФИО одной строкой. О телефоне данных мало: номер одной строкой. Сотрудник имеет много номеров, один номер принадлежит только одному сотруднику. Как организовать в БД?
### 28.	Есть сущность и связанная к ней сущность. Нужно вытащить список родительских сущностей. Что произойдет в рамках запроса, если ленивая загрузка включена? Как называется эта проблема?
### 29.	В БД есть справочные таблицы, которые никогда не меняются. Есть Spring MVC приложение. Нужно много ходить в эти таблицы, много запросов к БД. Как разрулить ситуацию со стороны Hibernate?
### 30.	Запускаем поток 1. В этом потоке сделаю 5 раз выборку из базу по одному и тому же id. Если включить запросы в БД, что мы увидим?
### 31.	Если написать дефортный OneToMany? Выберу из базы и закрою транзакцию и попробую сериализовать. Что будет?
### 32.	Есть транзакция, которая состоит из 10 различных комманд. Предположим, что все вычислили правильно, уровень изоляции постален верно. Концепция ACID гарантирует на 100% что проблем не возникнет?
### 33.	Когда делаем JOIN указываем по каким параметрам связываем таблицы. Чаще всего используем оператор ON. Какие еще операторы можно использовать?
### 34.	Нужно делать поиск по большому количеству колонок. Не хочу делать индексы. Что можно придумать?
### 35.	Есть формочка поиска в интернет магазине и надо строить динамический sql запросы в зависимости от параметров с формы. Как мы можем по запросу формировать динамические sql запросы?
### 36.	Берем постгре консоль, где можно выполнять запросы. Нужно вывести первую страницу, которая содержит пять элементов. Как должен выглять запрос?
### 37.	Находимся на первой страничке интернет магазина. Вывелось пять элементов. Переходим на вторую страницу, но в момент перехода добавляется еще пять элементов. Получается, что при переходе с первой страницы на вторую мы увидем информацию с первой страницы. Как решить?
### 38.	Приложение супер оптимизировано, но мы уперлись в производительность в БД. Как это можно решить?
### 39.	Есть индекс по нескольким полям X, Y, Z. Уcловия Y1, Z2. X - не указан. Будет ли профилировщик использовать этот индекс?
### 40.	Создали Entity, неправильно переопределили hashCode(), он всегда возвращает рандомное число. Чем это опасно?
### 41.	Есть две сущности. Связь One to Many. В первой сущности есть поле список второй сущности. Достаем из БД первую сущность и удаляем ее. Что будет с вложенным списком второй сущности
### 42.	Почему OneToMany Lazy, а ManyToOne Eager
### 43.	В БД много записей. Как настроишь отображение большого количества данных между бэком и фронтом?
### 44.	Описываешь структуру сотрудника предприятия. У сотрудника есть начальник и подчиненные. Как реализовать такую структуру?
### 45.	Делаешь рабочий проект. Как понять тебе нужна ORM или JDBC?
### 46.	Как с помощью LEFT и RIGHT JOIN получить выборку аналогичную FULL JOIN
### 47.	Можно в проде создать новое поле на работающей базе?
### 48.	Как в SQL посчитать уникальные значения по нескольким полям? Без использования DISTINCT, потому что поле высчитывается, например
### 49.	Где отследить миграцию, которую сделали с помощью liquibase для Postgres? Как в liquibase настраивается лог миграции?
### 50.	Есть таблица. После каких значений id выборка может подтормаживать? (к примеру если 10 Id то норм, а весли десять миллионов то начинает лагать)
	
# Spring Framework

---
### 1. Есть Spring Boot Application, он собрался. Запускаешь получившийся jar-ник. Он падает с Runtime Exception - не может внедрить зависимости: 2 кандидата на внедрение в какое-то место. Из-за чего такое может произойти? Как решить?
### 2. Есть класс-сервис. Внутри 2 метода. Оба public, @Transactional. Первый метод внутри обращается ко второму. Инжектим класс из другого класса и обращаемся к первому методу. Будет ли второй метод транзакционным? После. бираем транзакцию у первого метода.  Делаем такое же обращение через первый метод.  Через 10 минут демо, надо, чтобы второй метод стал транзакционным
### 3. Можем ли мы создать несколько синглтонов, которые будут имплемитировать один и тот же класс, но будут разные параметры?
### 4. Подключаю Spring Boot Application, делаю Maven parent SpringBoot и подключаю SpringBootStarter. Веб появляется?
### 5. От стартеров абстрагируемся. Хотим сделать Spring Boot приложение. Ставим @SpringBootApplication public static void main. Передаешь класс, где main. Добавляешь зависимости, стартеры и все начинает работать. От момента, как прописал зависимости и поставил аннотацию - что происходит? - Что значит идет конфигурирование приложения?
### 6. Как поведёт себя запущенный проект на Spring без spring-boot-starter-web?
### 7. Есть метод который помеченный @Transactional, в середине нужно сохранить сохранить промежуточный результат в отдельную таблицу даже при исключении
### 8. Есть контроллер Singletone. Он торчит наружу своим API. Мы этот контроллер autowire-им в сервис. Сервис Prototype. User 10 раз дергает контроллер. Сколько будет создано сервисов?
### 9. У нас есть библиотека. В ней главный интерфейес movable. У него метод move() что-то двигает. У нас есть имплементация movableImpl() этого метода. Скомпилировали, собрали war, выложили на Nexus. Другой разраб берет нашу библиотеку, использует autowired куда-то себе, у него все работает. Менеджер попросил что-то у нас переделат. Мы решили сделать movableImpl2(), там имплементация того же интерфейса movable, который autowire-ид тот разраб у себя. Какие будут проблемы?
### 10. Junior developer повесил @Transactional так, что транзакция не открывается. Как он это сделал?
### 11. Есть аннотация, уже написана. Когда разраб помечает свой метод этой аннотацией, происходит логирование. Как реализовать такой функционал?
### 12. Приложение использует библиотеку. Библиотека реализует интерфейс. Есть две реализации бинов, одна в самой библиотеке, вторая в нашем приложении. Мы инжектим интерфейс. Как ведет себя Spring?
### 13. Есть интерфейс, который реализуют несколько классов. Я пытаюсь внедрять этот интерфейс куда-нибудь как Bean. Как Spring поймет, какую реализацию выбрать?
### 14. Один сервис отправил сообщение, что нужно сохранить несколько сущностей. Нужно сохранить всё или ничего. Как бы сделал процесс отката?
### 15. Представим что у нас есть Транзакционный метод. В нем вначале через репозиторий делаем findOne, потом изменяем ее через save и кидаем повторный запрос findOne. Сколько запросов к БД будет выполнено?
### 16. Приложение работает несколько суток, принимает HTTP трафик. Есть ли возможность в Spring закинуть туда бин, не рестартуя приложение?
### 17. Spring приложение, прикручена БД. Есть требование, что нельзя хранить login, password в Application Properties в открытом виде. Они там хранятся в зашифрованном виде. Как решить проблему, чтобы Spring расшифровывал их? Токен для расшифровки хранится на локальной машине
### 18. Создаем бины котрые реализовывают временный контейнер Файл. Файл, что то сохраняет и что то достает. Если закроем приложение то файл останется. Как уничтожить бин, для грамотного использования ресурсов.
### 19. Как создать несколько DataSource в спринг-приложении и управлять ими?
### 20. Если у нас есть несколько DataSource,  создаются в нашем приложении два бина одного и того же типа. Место для инжекта только одно. Как разрулить ситуацию?
### 21. Если создаем в бине обращение к ресурсу. Нужно корректно закрыть ресурс. Как это сделать?
### 22. Есть standalone провайдер авторизации. KeyClock  к примеру. Как сервис провалидирует этот токен?
### 23. Если я поменяю Service на Component. Что-то поменяется в приложении?
### 24. Можно миксовать конфигурации? Часть сделать аннотациями, а часть XML?
### 25. Что если надо заинжектить интерфейс, а у меня две реализации в Context
### 26. Есть Singleton Bean. Есть Request HTTP запрос. Нам надо из запроса получить хедеры и залогировать. Как можно это заинжектить? Есть ли готовые решения у Spring?
### 27. Что будет если на каждый запрос будет создавать новый ApplicationContext?
### 28. Что будет если будет исключение в PostConstruct
### 29. Используем SpringBootApplication, а используемые Бины лежат в библиотеке. Будут ли они подтягиваться автоматически?
### 30. Как без LAZY мы можем сделать ленивую загрузку бина?
### 31. Есть проект. В проекте есть Kafka и БД. Указываем параметры подключения к БД. Если у нас не указаны переменные в Application Properties для БД, то нам ДатаСоурс создавать не надо. Если у нас не указаны параметры application properties то нам Бин поднимать не надо. Как тогда сделать?
### 32. Если ловим OptimisticLockException, что делаем?
### 33. Есть самописная аннотация. Есть метод, который реализует определенный функционал. Как сделать так, чтобы когда мы ставили нашу самописную аннотацию вызывался наш метод с прописанным функционалом. 
### 34. Проблема управления распределнной транзакцией. Какие есть подходы к решению?
### 35. Пишем интеграционный тест, который протестирует endpont, обращение в Сервис и БД. Как на Spring написать интеграционный тест?
### 36. Есть стартер и Application. В стартере определен бин датасоурс, который инжектиться аппликейшином и аппликатион с ним работает. Потом сделали вторую версию Стартера и в эту версию нужно добавить еще один бин такого же типа, чтобы в одном месте кода использовался один бин, в другом другой бин. Важно, чтобы бины были одного типа. Вопросы: 1. Как можно реализовать, чтобы использовать два бина с одинаковым типом. 2. Приложение не должно заметить изменений и должно продолжить использовать первый бин.
### 37. Есть Java интерфейс, который имплементируют два класса. На каждой имплементации висит @Service. Это корректно?
### 38. Когда подключаешь стартер, он подтягивает все зависимости. Если мне нужен стартер, но одна зависимость в нем не нужна. А переписывать стартер не хочется, что делать?
### 39. Если заменить Configuration на Component бины не будут создаваться?
### 40. Есть большое приложение. Много классов, контроллеров, сервисных слоев. В большую часть этих слоев инжектится бин, созданный из какого-то библиотечного класса, который мы менять не можем. Этот бин везде используем, он создан через Java конфигурацию. Теперь нам надо создать еще один такой же бин, но с другими параметрами. Хотим новый бин использовать в новом сервисе. А в старых местах должен инжектиться старый бин. Как это развязать? Хотим иметь два Singleton
### 41. Есть наша инфраструктурная аннотация, которая логирует Rest контроллеры (@RestLogger). Мы ее везде вешаем, но иногда забываем. Можно ли сделать, чтобы при старте приложения Spring сам проверил, что на всех классах, помеченных @RestController есть @RestLogger? И, если где-то не висит, то деплой падает с понятной ошибкой
### 42. Подключаешь старый проект через зависимости к своему проекту. Надо, чтобы все бины из старого проекта попали в Spring context. Как это сделать?
### 43. Две транзакции хотят обновить одну и туже строку. Что будет происходить?
### 44. Если первая транзакция захватила объект для изменения и изменила его. Вторая транзакция на этом объекте отработает? Какие проблемы будут? Ситуация гонки за данными
### 45. Как настроить зависимости бинов для разных сред разработки? Например нужно использовать две разные БД.
	
# Kafka и брокеры сообщений

---
### 1. Со стороны consumer-а. Топик очень высоконагруженый. 8 партиций. Хотим масшрабироваться на стороне consumer-а, читать сообщения побыстрее. Какой способ? Чтобы читать сообщения с одной бизнес-логикой несколькими Spring-приложениями
### 2. Три машины в кафке и одна упала. Что с нашей инфой? Инфа постарадает?
### 3. Было 2 сервиса (producer, consumer), общались по Kafka. Consumer на каждое сообщение должен проходить большой процесс обогащения, поэтому стали копиться сообщения. Решили в двух pod-ах поднять consumer. Но второй pod не видит сообщений. В чем проблема?
### 4. Если у нас несколько брокеров как будут распологаться partition?
### 5. У нас есть n partition. Есть ли смысл настроить Spring приложение для увеличения partition?
### 6. Consumer group. 10 партиций и консьюмеры не справляются. Что делать?
### 7. Есть producer, consumer, consumer record. Consumer record несет в себе key-value. Есть топик, в нем 3 партиции. Мы продьюсим сообщения. Вкакую патртицию попадают сообщения? По каким принципам?
### 8. Топик и 3 партиции. Мы создаем одного consumer-a. К каким партициям прицепится consumer? - цепляется ко всем 3 партициям. Создаем еще одного consumera. С такой же group id. И цепляем его к такому же топику. Он тоже подцепится к этим трем партициям? - Kafka ребалансируется, один консьюмер получит 2 партиции, а второй консьюмер получит 1 партицию
### 9. Есть 5 консьюмеров. Хотим ими параллельно читать из Kafka, чтобы каждому доставались уникальные сообщения. Можно ли такого достичь?
### 10. Есть два сервиса, им нужно общаться между собой. Два топика. Что должно быть реализовано на сервисах?
### 11. Есть consumer group c одним consumer-ом и топик с одной партицией, есть задержка в чтении как можно исправить?
### 12. Есть брокер и сервис который отправляет в него сообщения. Нужно сделать чтобы сообщения отправлялись всегда даже при сбое, потере питания и т.д
### 13. Несколько микросервисов читают из одного топика. Как обеспечить, что один топик, один producer и 3 consumer-а, и все 3 гарантированно должны забрать одно и то же сообщение?
### 14. Возможно в Kafka послать сообщения так, чтобы они были получены в том же порядке, как отправлены?
### 15. Один сервис продуцирует сообщеня, по сути является продьюсером. Публикует результаты экзаменов учеников. Есть 3 системы, которые потребляют сообщения. Сколько нужно сделать Топиков и Партиций? Если сделаем 1 партицию, что случится? А если 10?
### 16. Возможно обрабатывать несколькими консьюмерами одну партицию?
### 17. Как на стороне консьюмера обрабатывать сообщения, чтобы не обрабатывать дубли?
### 18. Консьюмер отвалился, продьюсер есть, сообщения идут в топик. Консьюмеров на топике нет. Потеряются ли сообщения? Когда консьюмер поднимется, придут ли к нему пропущенные сообщения?
### 19. Consumer не существует. Топик существует, Продюсеры что-то туда откидывают. Создаю нового Консьюмера. Есть ли возможность получить все сообщения, которые были до этого? Скажем так, остались в этом Топике
### 20. Консьюмер подключился к Топику и считывает сообщения. В одном из сообщений вылетело необработанное исключение. Что будет с ним?
### 21. 1 продьюсер, 1 топик, 2 консьюмера. Продьюсер посылает ивент. Кто из консьюмеров получит ивент?
### 22. Что делать если у нас 1000 listener в kafka?
### 23. Есть топик. 2 партиции. Отправляем одно сообщение. Есть два потребителя. Есть два варианта. Первый, у них одна консьюмер группа. Второй, у них разные консьюмер группы. В каком случае оба микросервиса прочитают одно и тоже сообщение.
### 24. Что будет если консьюмеров будет больше чем партиций?
### 25. Что будет если партиций будет больше чем консьюмеров?
### 26. 1000 сообщений в секундку, как нам определить, что пришедший ответ из kafka тот, который нам нужен. 
### 27. Можно в RabbitMQ послать сообщение напрямую или нужно вводить промежуточные сущности?
### 28. Как будет вести себя консьюмеры, если количество консьюмеров меньше чем количество партиций в топике? А если 10 Консьюмеров а Партиций пять. Как распределятся?
### 29. Несколько Consumer в группе читает из одного Топика. Какой то Consumer отказал. Нужно чтобы другой Consumer стал читать из Топика вместо отказавшего. 
### 30. Есть Consumer зависает, какие последствия могут возникнуть?
### 31. Если два контейнера будут в одной сети, какие будут проблемы?
### 32. Есть однопоточный лиснер Kafk-и, но нужно параллельно обрабатывать то, что оттуда приходит. Как бы ты это сделал? Нельзя использовать батчевый лиснер Kafk-и
### 33. Нужно, чтобы один консьюмер всегда обрабатывал один и тот же тип сообщений. Как реализовать?
### 34. У нас 4 партиции и 4 консьюмера. Потом добавляется еще один Консьюмер. Что будет?
### 35. Два топика, три партиции, два консьюмера из одной группы. Как распределятся партиции по консьюмерам?
### 36. Что если выставил  batch size условно 10 кб. В итоге рейт очень маленький. Пишешь по одному сообщению в минуту. Как это исправить?
### 37. Есть Консьюмер группа. 2 консьюмера читают из топика из 4 партиций. Что произойдет если один из консьюмеров в группе сдохнет?
	
# Микросервисы, REST, дизайн систем, деплой

---
### 1. Сервис в рамках транзакции сохранил в БД и должен еще записать в Kafka, но отключили свет. Как предусмотреть, что в БД закомичены данные, которые не дошли до конца?
### 2. Сервис закупок хранит количества остатка товара на складе.  Пользователь выбирает товары в приложении и видит, сколько товаров осталось. Этот сервис проскалирован и используется кеширование для количества остатка товара. Какой кеш лучше локальный или распределенный? - Если сделаем локально, будут ли проблемы? - С другой стороне, если товар в одном экземпляре, у каждого клиента это записано. Что может случиться?
### 3. Стратегии деплоя. Сервис работает в проде, новый релиз с серьезным багом.  Если такой релиз выкатим, а предыдущий убьем, будет больно. Какие более плавные подходы деплоя?
### 4. У тебя был монолит, билдился 40 минут.  Если надо раскатить предыдущую версию, придется ждать 40 минут. Есть ли менее болезненные подходы? 
### 5. Есть веб-сервис на Tomcat, Spring Boot. Ты написал Controller получения имени пользователя по id. За именем пользователя идешь в БД Postgres. Запускаешь этот сервис на одноядерной системе, ожидаешь нагрузку около 100 запросов в секунду. Будет ли это работать?
### 6. Одноядерная система. Запускаем сервер, но ручка вычисляет числа Фибоначчи. Что-то изменится? - Как это будет выглядеть со стороны метрик?  - Со стороны пользователей это будет выглядеть так, что запрос очень долго выполняется? Что будет с CPU? На сколько он будет нагружен?
### 7. Нужно передать на сервер логин и пароль. Через что будем делать? Почему?
### 8. Есть сервис, который вызывает другой сервис по http. Мы используем RestTemplate или Feign Client. Мы должны взять метод, что-то сделать, обработать, в базу положить. И хотим весь процесс сделать асинхронным, чтобы метод не блочил систему. Как это реализовать?
### 9. Есть API, мы торчим наружу get запросом, с помощью которого туда передается команда. В рамках API выбираются очень большие данные, их нужно будет отправить в Kafka. За месяц накапливается 2 млн записей таблицы и их нужно выгрузить в Kafka. Какие подводные камни могут быть, если наружу торчим get запросом? На фронт нужно отправить количество записей
### 10. Одно и то же приложение нужно запустить в двух разных окружениях. Как это сделать проще всего?
### 11. Пишешь приложение, на локалке все работает, отдаешь в сборку. DevOps запускает на проде, там все падает, не подключается к БД, не подключается к Kafka. Что делать?
### 12. Хотим запускать приложение на нескольких стендах: dev, prod. Есть выбор: использовать Spring, либо собственную Статическую Фабрику. Где будет удобнее? Продолжение ситуации. Есть подключение к БД. В Абстрактной Фабрике есть конфиги, объекты, я сам создаю инстанс. На другом стенде придется создать другой класс с другими конфигами. И подкладывать нужный объект для каждого стенда. Как это в Spring реализовано?
### 13. Синхронизация микросервисов, чтобы только один микросервис отправил запрос, а остальные не отправляли. Есть монолит, есть Sheduled, который идет в БД, строит отчет, отправляет сообщение в Kafka. Если есть второй инстанс, то оба отправят в Kafka сообщение, а нам нужно только одно сообщение.
### 14. Один сервис вызывает другой сервис. Где может возникнуть задержка? На что обратить внимание, что бы уменьшить время задержки?
### 15. Работа с БД в микросервисах. Используем подход Database per Microservice. Как добиться той же ситуации, как с транзакциями?
### 16. Работает только синхронно и в диалоговом режиме. Посылает гет запрос и должен получить ответ. Сложность в том, что данные которые нужно получить собираются асинхронно. Как совместить асинхронность и синхронность?
### 17. Есть приложение, навешал туда Lock-ов, все работает четко. По бизнесу конфликтов нет. Начал горизонтально масштабировать свое приложение, и полезли проблемы. Почему Lock-и перестали спасать после горизонтального масштабирования? Горизонтальное масштабирование - приложение работало в одном экземпляре, стало в двух экземплярах работать
### 18. Есть запрос от клиента в какой-то из наших контроллеров, через что проходит запрос?
### 19.  У тебя есть бизнес процессы, есть микросервисы. Микросервис отправки сообщений и микросервис бизнесс логики. Как ты будешь их интегрировать? Какой протокол и какую технологию выберешь?
### 20. Тебе запрещено работать с Kafka. Есть только REST. Микросервис который отвечает за работу оборудования. Он оставляет заявку сервису, который регистрирует и составляет расписание проверок. Как это реализовать по REST. Составление расписания раз в 8 часов
### 21. Внедрение гарантий доставки. Если мы добавляем запись в БД, то как проверять, что случилось с клиентом? Клиент тоже должен взаимодействовать с БД?
### 22. Есть сервис, который по эндпоинту обновляет что то в базе. В эндпоинт могут одновременно обратиться с разных мест. По умолчанию Spring boot может добавить в базу сразу два одинаковых запроса. В итоге мы ломаем логику. Как решить эту проблему?
### 23. У нас нет REST, пришел менеджер, хочет ввести REST. Точно ли нам надо, хорошо ли? Как это сделать?
### 24. Как завернуть Java приложение в Docker? Есть JAR. Расскажи пошагово
### 25. Если у нас злоумышленник сворует рефреш токен, он не сможет получить новый access?
### 26. REST. Ты сделал Get запрос, как он получает данные? Что тебе надо сделать, чтобы получить определенные данные?
### 27. Есть старый монолит и новые микросервисы. Старую БД мигрировать не хотим. Если нагрузка повышается, то старый монолит начинает отказывать. Каскадно микросервисы начинают отключаться. Фронт отключился. Как сделать так, чтобы старый микросервис не особо влиял на текущую реализацию? Как выжить в периоды пиковой нагрузки?...Продолжение ситуации. Circuit Breaker  отрубил микросервис, хорошо все заработало. Но нас начали DDOS-ить. Реальные клиенты начинают получать timeout. Что делать?
### 28. Как написать интеграцию с другими сервисами? С чего начнешь?
### 29. Есть Сервис который принимет http запрос и этому Сервису нужно сходить в другой Сервис и принять от него запрос и передать первому Сервису. Запросы через Kafka в синхронном режиме. Код должен принять http запрос и дать синхронно ответ и в промежутке вызвать Kafka.
### 30. Банковское приложение. Есть несколько фронтендов. Браузерый и мобильный. Есть общее API. Есть общее ядро, которому все равно откуда приходят запросы. Фронтенды ожидают свои JSON. 
### 31. Что сделать для создания endpoint для POST запроса?
### 32. В Сервисе есть обращение к Google api. Как сделать так, чтобы при тестах не отсылались запросы в сторонние сервисы?
### 33. Предположим, разработали микросервис на спринге и есть бизнес-логика по забору данных, есть "тонкое место". Что делать будем, как решать проблему?
### 34. Есть бизнес, где функционал очень связан. Микросервис большой. Он может оставаться микросервисом? Или это уже монолит?
### 35. Есть сервис, который нужно протестировать. В сервисе есть внедрение стороннего компонента, хочу этому компоненту придать определенное поведение. Тест с какой аннотацией нужно сделать заглушкой?
### 36. Нужно разработать систему уведомлений, которая поддерживает несколько каналов доставки. Например email, смс, пуш уведомления. Нужно спроектировать так, чтобы система поддерживала расширение в виде добавления новых каналов доставки. 
### 37. Есть некоторый эндпоинт, к обращению к которому происходит 500 ошибка и пользователь получает StackTrace. Не хотим, чтобы пользователь это видел. Нужно сделать, чтобы при ошибке пользователь получал осмысленное сообщение. Как это сделать средствами Rest и Spring MVC
### 38. Разрабатываешь новый Hello сервис. Есть один get метод. Поднимаем в Спринг Сервис. Из Постмана посылаем запрос Get. Опиши что происходит на пути следования запроса. От нажатия кнопки до того как запрос пришел в Сервис
### 39. Представь, что проектируем приложение. Нужно сохранить объект. Например сессию пользователя или покупку пользователя. Какую БД выбрать?
### 40. В k8s поднимаем более одного экземпляра микросервисного приложения. Возможны подводные камни, связанные с синхронизацией. Были ли такие ситуации? Какие проблемы?
### 41. Есть два сервера, ты хочешь подружить их по TLS. Что для этого нужно?
### 42. Банковское приложение. Пользователь хочет сделать перевод. В БД надо поменять запись и отправить сообщение в очередь. Как это сделать транзакционно?
### 43. Банковское приложение. Хотим сделать вызов на перевод денег. Отваливается сеть. Как сделать запрос только один раз? Как точки зрения приложения сделать так, чтобы ничего не задублировалось из-за падения сети. т.е. запрос от пользователя ушел и сразу потерялась связь, но запрос отработал. Что делать?
	
# Отладка и производительность

---
### 1. Действия при OutOfMemory. Сервис перезагружается каждые несколько часов
### 2. ЦПУ улетел вверх. Твои действия. 
### 3. Приходил запрос от саппорта. Клиент жалуется, что у него тормозит конкретная страница. Как будешь начинать копать задачу и куда будешь двигаться. 
### 4. Есть микросервис. Есть ендпоинт. Ендпоинт не укладывается по времени работы на какой то ступени нагрузочного тестирования. Нужно ускорить его работу. Как приступить к этой задаче? Предположим у нас нет БД. Какие болевые точки могут быть?
### 5. Есть java сервер. Сервер завис. Как подойти к этой проблеме?
	
# Чистый код, SOLID, паттерны и рефакторинг

---
### 1. Есть один монолит на Java 11. Он содержит системы, которые надо вынести. С чего бы начал?
### 2. У нас есть SOLID и есть множественная имплементация. С одной стороны говорят дробите, с другой принцип единой ответственности, как решить этот диссонанс?
### 3. Метод, в котором 150 if-ов, где сравниваются строки. Как отрефакторить?
### 4. Сервис А должен сходить в Сервис Б. Они не знают API друг друга. Какой паттерн помогает им понять? 
### 5. Планирование архитектуры между несколькими сервисами. (нужно смотреть фотографию) Как бы ты создал Контракт взаимодействия между сервисом egrn и внутренними клиентами. И между egrn и внешним сервисом Росреестр. 
### 6. В первом сервисе произошло событие, закоммитили в БД, нужно отправить сообщение в кафку. Кафка реализует мост at least once т.е. может много сообщений в кафку. Если транзакция закоммителась мы должны гарантированно другому сервису сообщать, что событие произошло. Какие паттерны реализовать?
### 7. Общаемся с сервисом по REST, получили сетевую ошибку, кажется, что можно вызывать заново. Что настроить на своей стороне? - паттерн Retry - Если соседний сервис очень слабый, то постоянный retry еще больше его положит - увеличить промежутки времени между retry или паттерн circuit breaker
	
# Git и системы сборки

---
### 1. Есть Петя и Вася пишут каждый пишет в своей ветке, Пети понадобился один из комитов Васи как это сделать?
### 2. Есть maven репозиторий с API и репозиторий с вашим сервисом который подключен как зависимость, после обновления API и сервиса - обновленния не произошло, почему? Загрузиться ли в репозиторий изменения при использовании package?
### 3. Как в консоле скомпилировать и запустить класс?
	
# Командные процессы

---
### 1. Ты делаешь задачу и не успеваешь к дедлайну, какие твои действия?
### 2. Сервис интеграции с платежным шлюзом. Два метода. Как бы вы оценили эту таску и какой срок реализации таски?
### 3. Есть куб. Он состоит из тысячи маленьких кубиков. То есть у нас куб со стороной 10 на 10 на 10. Нужно найти количество кубиков, находящихся на внешнем слое этого куба. То есть мы можем крутить-вертеть, сколько мы можем в сумме увидеть на внешнем слое кубиков