#### 28. –ó–∞–¥–∞—á–∞. –î–≤–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –º–µ—Ç–æ–¥–∞, –æ–¥–∏–Ω —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π –¥—Ä—É–≥–æ–π –±–µ–∑, —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç? –ö–∞–∫–∏–µ –æ—Ç–ª–∏—á–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏?

```java
@Transactional(isolation = Isolation.SERIALIZABLE)
public void example() {
    var account = accountRepository.findById(""1"");
    var firm = firmRepository.findById(""1"");

    firm.setName(""Bla bla bla"");

    account.setBalance(0);
    accountRepository.save(account);
}

public void example() {
    Account account = accountRepository.findById(""1"");
    Firm firm = firmRepository.findById(""1"");

    firm.setName(""Bla bla bla"");

    account.setBalance(0);
    accountRepository.save(account);
}
```


{{< hint warning >}}
**–°–ø–æ–π–ª–µ—Ä—ã –∫ —Ä–µ—à–µ–Ω–∏—é** ¬†
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}
- –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è **`@Transactional`** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –º–µ—Ç–æ–¥ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∞—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –æ—Ç–∫–∞—Ç –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏.
- –£—Ä–æ–≤–µ–Ω—å –∏–∑–æ–ª—è—Ü–∏–∏ **`Isolation.SERIALIZABLE`** —è–≤–ª—è–µ—Ç—Å—è —Å–∞–º—ã–º —Å—Ç—Ä–æ–≥–∏–º, –∏ –ø—Ä–∏ –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –¥—Ä—É–≥–∏–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π.
- –ë–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ **`@Transactional`** –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —á–∞—Å—Ç–∏—á–Ω–æ–π –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏.
{{< /details >}}

{{< details "–†–µ—à–µ–Ω–∏–µ" close >}}

1. **–ú–µ—Ç–æ–¥ —Å `@Transactional`** üõ†Ô∏è

```java
@Transactional(isolation = Isolation.SERIALIZABLE)
public void example() {
    var account = accountRepository.findById("1");
    var firm = firmRepository.findById("1");

    firm.setName("Bla bla bla"); // –≠—Ç–æ –±—É–¥–µ—Ç —á–∞—Å—Ç—å—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    account.setBalance(0);
    accountRepository.save(account); // –≠—Ç–æ –±—É–¥–µ—Ç —á–∞—Å—Ç—å—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
}
```

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
- –ï—Å–ª–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ, —Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è, –∏ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –≤ —Ç–æ–º –≤–∏–¥–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –±—ã–ª–∏ –¥–æ –Ω–∞—á–∞–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
- **`Isolation.SERIALIZABLE`** –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∫–∞ —Ç–µ–∫—É—â–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è.

2. **–ú–µ—Ç–æ–¥ –±–µ–∑ `@Transactional`** üö´

```java
public void example() {
    Account account = accountRepository.findById("1");
    Firm firm = firmRepository.findById("1");

    firm.setName("Bla bla bla"); // –≠—Ç–æ –Ω–µ –±—É–¥–µ—Ç —á–∞—Å—Ç—å—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    account.setBalance(0);
    accountRepository.save(account); // –≠—Ç–æ –Ω–µ –±—É–¥–µ—Ç —á–∞—Å—Ç—å—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
}
```

- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–µ—Ç–æ–¥–∞—Ö –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ** –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏ —Ñ–∏—Ä–º—ã, –Ω–æ –¥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—á–µ—Ç–∞, —Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ñ–∏—Ä–º–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è, –Ω–æ –±–∞–ª–∞–Ω—Å **–Ω–µ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω**.
- –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ **–Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö**, –≥–¥–µ –æ–¥–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ, –∞ –¥—Ä—É–≥–æ–µ ‚Äî –Ω–µ—Ç.

**–í—ã–≤–æ–¥**  
–ú–µ—Ç–æ–¥ —Å **`@Transactional`** –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç **–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö. –ë–µ–∑ **`@Transactional`** –≤–æ–∑–º–æ–∂–Ω–æ —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º –∏ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
{{< /details >}}
